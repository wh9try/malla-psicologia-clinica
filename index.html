// -----------------------------
//  Malla completa (Semestres 1‑9)
// -----------------------------
const malla = [
  // ---------- Semestre 1 ----------
  {
    semestre: "Semestre 1",
    creditos: 36,
    materias: [
      { nombre: "Fundamentos de la Salud Física y emocional", clasificacion: ["estudios-generales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Historia de la psicología",                     clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología de la Personalidad",                 clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Anátomo-fisiología",                            clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología del niño y del adolescente",         clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología social",                             clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] }
    ]
  },

  // ---------- Semestre 2 ----------
  {
    semestre: "Semestre 2",
    creditos: 42,
    materias: [
      { nombre: "Antropología filosófica",                       clasificacion: ["estudios-generales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Fundamentos de psicología clínica",             clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología de los procesos básicos",            clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicobiología",                                 clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología del adulto y del adulto mayor",      clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología del aprendizaje",                    clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología del trabajo",                        clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] }
    ]
  },

  // ---------- Semestre 3 ----------
  {
    semestre: "Semestre 3",
    creditos: 42,
    materias: [
      { nombre: "Pensamiento científico y tecnológico",          clasificacion: ["estudios-generales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Curso Electivo General LPSC",                   clasificacion: ["estudios-generales","electiva"],    creditos: 6, prerrequisitos: [] },
      { nombre: "Modelos y métodos de evaluación",               clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicopatología descriptiva",                    clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6,
        prerrequisitos: ["Fundamentos de psicología clínica","Psicología de la Personalidad"] },
      { nombre: "Neuropsicología clínica",                       clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología educativa",                          clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Curso Electivo Profesional LPSC",               clasificacion: ["estudios-generales","electiva"],    creditos: 6, prerrequisitos: [] }
    ]
  },

  // ---------- Semestre 4 ----------
  {
    semestre: "Semestre 4",
    creditos: 42,
    materias: [
      { nombre: "Ética social cristiana",                        clasificacion: ["estudios-generales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Enfoque de investigación cuantitativo en psicología",
        clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: ["Modelos y métodos de evaluación"] },
      { nombre: "Teoría y técnica de la entrevista",             clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6,
        prerrequisitos: ["Fundamentos de psicología clínica","Psicología de la Personalidad"] },
      { nombre: "Psicopatología comprensiva",                    clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6,
        prerrequisitos: ["Psicopatología descriptiva"] },
      { nombre: "Psicología de la desigualdad",                  clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología de la familia",                      clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología de la intervención social",          clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] }
    ]
  },

  // ---------- Semestre 5 ----------
  {
    semestre: "Semestre 5",
    creditos: 39,
    materias: [
      { nombre: "Tendencias de liderazgo",                       clasificacion: ["estudios-generales","obligatoria"], creditos: 3, prerrequisitos: [] },
      { nombre: "Análisis de datos en investigación psicológica",clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6,
        prerrequisitos: ["Enfoque de investigación cuantitativo en psicología"] },
      { nombre: "Terapia cognitivo conductual",                  clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicogerantología clínica",                     clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Evaluación y diagnóstico clínico",              clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6,
        prerrequisitos: ["Teoría y técnica de la entrevista","Psicopatología descriptiva"] },
      { nombre: "Intervenciones psicológicas en niños y adolescentes",
        clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Evaluación del recurso humano",                 clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] }
    ]
  },

  // ---------- Semestre 6 ----------
  {
    semestre: "Semestre 6",
    creditos: 46,
    materias: [
      { nombre: "Pensamiento crítico y creativo",                clasificacion: ["estudios-generales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Enfoque de investigación cualitativo en psicología",
        clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6,
        prerrequisitos: ["Análisis de datos en investigación psicológica"] },
      { nombre: "Piscoterapia psicoanalítica",                   clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicofarmacología",                             clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Abordajes psicoterapéuticos de las situaciones de urgencia",
        clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Prácticas profesionales intensivas I (Psicología clínica)",
        clasificacion: ["estudios-profesionales","obligatoria"], creditos: 16, prerrequisitos: [] },
      { nombre: "Servicio social",                               clasificacion: ["estudios-profesionales","concentracion"], creditos: 0, prerrequisitos: [] }
    ]
  },

  // ---------- Semestre 7 ----------
  {
    semestre: "Semestre 7",
    creditos: 43,
    materias: [
      { nombre: "Retos de la comunicación contemporánea",        clasificacion: ["estudios-generales","obligatoria"], creditos: 3, prerrequisitos: [] },
      { nombre: "Curso Electivo General LPSC",                   clasificacion: ["estudios-generales","electiva"],    creditos: 6, prerrequisitos: [] },
      { nombre: "Terapia sistémica",                             clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Psicología clínica y de la salud",              clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6,
        prerrequisitos: ["Psicopatología comprensiva"] },
      { nombre: "Curso Electivo Profesional LPSC",               clasificacion: ["estudios-profesionales","concentracion"], creditos: 6, prerrequisitos: [] },
      { nombre: "Prácticas profesionales intensivas II (Psicología clínica)",
        clasificacion: ["estudios-profesionales","obligatoria"], creditos: 16, prerrequisitos: [] }
    ]
  },

  // ---------- Semestre 8 ----------
  {
    semestre: "Semestre 8",
    creditos: 40,
    materias: [
      { nombre: "Sostenibilidades y responsabilidad",            clasificacion: ["estudios-generales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Seminario de proyectos de investigación (Psicología)",
        clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Curso Electivo Profesional LPSC",               clasificacion: ["estudios-profesionales","concentracion"], creditos: 6, prerrequisitos: [] },
      { nombre: "Internado psicología clínica",                  clasificacion: ["estudios-profesionales","obligatoria"], creditos: 22, prerrequisitos: [] }
    ]
  },

  // ---------- Semestre 9 ----------
  {
    semestre: "Semestre 9",
    creditos: 30,
    materias: [
      { nombre: "Retos y dinámicas globales",                    clasificacion: ["estudios-generales","obligatoria"], creditos: 6, prerrequisitos: [] },
      { nombre: "Innovaciones en mediación tecnológica en psicología",
        clasificacion: ["estudios-profesionales","obligatoria"], creditos: 6,
        prerrequisitos: ["Enfoque de investigación cualitativo en psicología"] },
      { nombre: "Curso Electivo Profesional LPSC",               clasificacion: ["estudios-profesionales","concentracion"], creditos: 6, prerrequisitos: [] },
      { nombre: "Programa de evaluación final (Psicología clínica)",
        clasificacion: ["estudios-profesionales","obligatoria"], creditos: 12, prerrequisitos: [] }
    ]
  }
];

// -----------------------------
//  Renderizado e interactividad
// -----------------------------
function renderMalla() {
  const cont = document.getElementById("malla");
  malla.forEach(sem => {
    // Contenedor del semestre
    const semDiv = document.createElement("div");
    semDiv.className = "semestre";

    // Título y créditos
    semDiv.innerHTML = `
      <h2>${sem.semestre}</h2>
      <p class="creditos-semestre">Créditos: ${sem.creditos}</p>
    `;

    // Materias
    sem.materias.forEach(mat => {
      const matDiv = document.createElement("div");
      matDiv.classList.add("materia", ...mat.clasificacion);
      if (mat.prerrequisitos.length) matDiv.classList.add("prerrequisito");

      matDiv.innerHTML = `
        <span>${mat.nombre}</span>
        <div>
          <button class="btn-aprobar">Se aprueba</button>
          <span class="info">+</span>
        </div>
      `;

      // Botón "Se aprueba"
      matDiv.querySelector(".btn-aprobar").addEventListener("click", () => {
        matDiv.classList.toggle("aprobada");
      });

      // Botón "+" para modal
      matDiv.querySelector(".info").addEventListener("click", () => {
        document.getElementById("modal-title").textContent = mat.nombre;
        document.getElementById("modal-info").innerHTML =
          `Créditos: ${mat.creditos}` +
          `<br>Clasificación: ${mat.clasificacion.join(", ")}` +
          (mat.prerrequisitos.length
            ? `<br>Prerrequisitos: ${mat.prerrequisitos.join(", ")}`
            : "");
        document.getElementById("modal").classList.remove("hidden");
      });

      semDiv.appendChild(matDiv);
    });

    cont.appendChild(semDiv);
  });
}

// Cerrado del modal
document.querySelector(".close-button").addEventListener("click", () =>
  document.getElementById("modal").classList.add("hidden")
);

// ¡Dibujamos la malla!
renderMalla();
